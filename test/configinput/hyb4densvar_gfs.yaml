test_framework_runtime_config: --log_level=test_suite
nml_file: Data/fv3files/fmsmpp.nml
trc_file: Data/fv3files/field_table
resolution:
  nml_file: Data/fv3files/input_gfs_c48.nml
  trc_file: Data/fv3files/field_table
  halo: '3'
  filepath_akbk: Data/INPUTS/GFS_c48/ENSEMBLE/mem001/RESTART/
  filename_akbk: 20180414.210000.fv_core.res.nc
  ak_var: ak
  bk_var: bk
model:
  name: 'FV3'
  nml_file: Data/fv3files/input_gfs_c48.nml
  trc_file: Data/fv3files/field_table
  nml_file_pert: Data/fv3files/inputpert_4dvar.nml
  tstep: PT15M
  readtraj: 0
  lm_do_dyn: 1
  lm_do_trb: 0
  lm_do_mst: 0
cost_function:
 cost_type: 4D-Ens-Var
 window_begin: '2018-04-14T21:00:00Z'
 window_length: PT6H
 window_sub: PT6H
 variables:
 - ud
 - vd
 - ua
 - va
 - t
 - delp
 - ps
 - q
 - qi
 - ql
 - o3
 Jb:
  Background:
   state:
   - restart_type: gfs
     datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem001/RESTART/
     datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem001/RESTART/
     datapath_write: 'Data/'
     date: '2018-04-14T21:00:00Z'
     read_crtm_surface: 0
     filename_core: 20180414.210000.fv_core.res.nc
     filename_cplr: 20180414.210000.coupler.res
     filename_trcr: 20180414.210000.fv_tracer.res.nc
     nml_file: Data/fv3files/input_gfs_c48.nml
     trc_file: Data/fv3files/field_table
     variables:
     - ud
     - vd
     - ua
     - va
     - t
     - delp
     - q
     - qi
     - ql
     - o3
   - restart_type: gfs
     datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem001/RESTART/
     datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem001/RESTART/
     datapath_write: 'Data/'
     date: '2018-04-15T03:00:00Z'
     read_crtm_surface: 0
     filename_core: 20180415.030000.fv_core.res.nc
     filename_cplr: 20180415.030000.coupler.res
     filename_trcr: 20180415.030000.fv_tracer.res.nc
     nml_file: Data/fv3files/input_gfs_c48.nml
     trc_file: Data/fv3files/field_table
     variables:
     - ud
     - vd
     - ua
     - va
     - t
     - delp
     - q
     - qi
     - ql
     - o3
  Covariance:
   covariance_time:
 # ----------------------
   - covariance: ensemble
     members: '4'
     variables:
      variables:
      - ud
      - vd
      - ua
      - va
      - t
      - delp
      - ps
      - q
      - qi
      - ql
      - o3
     date: '2018-04-14T21:00:00Z'
     localization:
      localization: ID
      date: '2018-04-14T21:00:00Z'
      variables:
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - ps
        - q
        - qi
        - ql
        - o3
      bump_ensemble:
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-14T21:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180414.210000.fv_core.res.nc
        filename_cplr: 20180414.210000.coupler.res
        filename_trcr: 20180414.210000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-14T21:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180414.210000.fv_core.res.nc
        filename_cplr: 20180414.210000.coupler.res
        filename_trcr: 20180414.210000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-14T21:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180414.210000.fv_core.res.nc
        filename_cplr: 20180414.210000.coupler.res
        filename_trcr: 20180414.210000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-14T21:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180414.210000.fv_core.res.nc
        filename_cplr: 20180414.210000.coupler.res
        filename_trcr: 20180414.210000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      standard_deviation: '1.0'
      vertical_correlation: '0.4'
      horizontal_length_scale: 2e6
      maximum_condition_number: 1.0e6
      datadir: "."
      prefix: fv3jedi_gfs
      default_seed: 1
      method: cor
      strategy: common
      _strategy: specific_univariate
      new_hdiag: 1
      load_hdiag: 0
      new_nicas: 0
      load_nicas: 1
      timeslot: 1
      mask_type: none
      draw_type: random_uniform
      nc1: 864
      ntry: 3
      nrep: 2
      nc3: 10
      dc: 1000000
      nl0r: 1
      _nl0r: 15
      ne: 5
      minim_algo: hooke
      rvflt: 0
      lsqrt: 1
      resol: 4
      nicas_interp: bilin
      network: 0
      mpicom: 2
      advmode: 0
      diag_interp: bilin
      grid_output: 0
     state:
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-14T21:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180414.210000.fv_core.res.nc
       filename_cplr: 20180414.210000.coupler.res
       filename_trcr: 20180414.210000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-14T21:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180414.210000.fv_core.res.nc
       filename_cplr: 20180414.210000.coupler.res
       filename_trcr: 20180414.210000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-14T21:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180414.210000.fv_core.res.nc
       filename_cplr: 20180414.210000.coupler.res
       filename_trcr: 20180414.210000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-14T21:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180414.210000.fv_core.res.nc
       filename_cplr: 20180414.210000.coupler.res
       filename_trcr: 20180414.210000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
 # ----------------------
   - covariance: ensemble
     members: '4'
     variables:
      variables:
      - ud
      - vd
      - ua
      - va
      - t
      - delp
      - ps
      - q
      - qi
      - ql
      - o3
     date: '2018-04-15T03:00:00Z'
     localization:
      localization: ID
      date: '2018-04-15T03:00:00Z'
      variables:
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - ps
        - q
        - qi
        - ql
        - o3
      bump_ensemble:
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-15T03:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180415.030000.fv_core.res.nc
        filename_cplr: 20180415.030000.coupler.res
        filename_trcr: 20180415.030000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-15T03:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180415.030000.fv_core.res.nc
        filename_cplr: 20180415.030000.coupler.res
        filename_trcr: 20180415.030000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-15T03:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180415.030000.fv_core.res.nc
        filename_cplr: 20180415.030000.coupler.res
        filename_trcr: 20180415.030000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      - restart_type: gfs
        datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
        datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
        datapath_write: 'Data/'
        date: '2018-04-15T03:00:00Z'
        read_crtm_surface: 0
        filename_core: 20180415.030000.fv_core.res.nc
        filename_cplr: 20180415.030000.coupler.res
        filename_trcr: 20180415.030000.fv_tracer.res.nc
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        variables:
        - ud
        - vd
        - ua
        - va
        - t
        - delp
        - q
        - qi
        - ql
        - o3
      standard_deviation: '1.0'
      vertical_correlation: '0.4'
      horizontal_length_scale: 2e6
      maximum_condition_number: 1.0e6
      datadir: "."
      prefix: fv3jedi_gfs
      default_seed: 1
      method: cor
      strategy: common
      _strategy: specific_univariate
      new_hdiag: 1
      load_hdiag: 0
      new_nicas: 0
      load_nicas: 1
      timeslot: 1
      mask_type: none
      draw_type: random_uniform
      nc1: 864
      ntry: 3
      nrep: 2
      nc3: 10
      dc: 1000000
      nl0r: 1
      _nl0r: 15
      ne: 5
      minim_algo: hooke
      rvflt: 0
      lsqrt: 1
      resol: 4
      nicas_interp: bilin
      network: 0
      mpicom: 2
      advmode: 0
      diag_interp: bilin
      grid_output: 0
     state:
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem002/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-15T03:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180415.030000.fv_core.res.nc
       filename_cplr: 20180415.030000.coupler.res
       filename_trcr: 20180415.030000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem003/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-15T03:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180415.030000.fv_core.res.nc
       filename_cplr: 20180415.030000.coupler.res
       filename_trcr: 20180415.030000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem004/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-15T03:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180415.030000.fv_core.res.nc
       filename_cplr: 20180415.030000.coupler.res
       filename_trcr: 20180415.030000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
     - restart_type: gfs
       datapath_read: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
       datapath_tile: Data/INPUTS/GFS_c48/ENSEMBLE/mem005/RESTART/
       datapath_write: 'Data/'
       date: '2018-04-15T03:00:00Z'
       read_crtm_surface: 0
       filename_core: 20180415.030000.fv_core.res.nc
       filename_cplr: 20180415.030000.coupler.res
       filename_trcr: 20180415.030000.fv_tracer.res.nc
       nml_file: Data/fv3files/input_gfs_c48.nml
       trc_file: Data/fv3files/field_table
       variables:
       - ud
       - vd
       - ua
       - va
       - t
       - delp
       - q
       - qi
       - ql
       - o3
 Jo:
   ObsTypes:
#   - ObsType: Aircraft
#     ObsData:
#       ObsDataIn:
#         obsfile: Data/aircraft_obs_2018041500_m.nc4
#       ObsDataOut:
#         obsfile: Data/gfs.3dfgat.obt
#       obsvalue: ObsValue
#     Covariance:
#       covariance: diagonal
#       obserror: ObsError
   - ObsType: Radiosonde
     ObsData:
       ObsDataIn:
         obsfile: Data/sondes_obs_2018041500_m.nc4
       ObsDataOut:
         obsfile: Data/gfs.3dfgat.obt
       obsvalue: ObsValue
     Covariance:
       covariance: diagonal
       obserror: ObsError
minimizer:
  algorithm: DRIPCG
output:
  restart_type: gfs
  datapath_write: Data/
  filename_core: Hybrid-4DEnsVar.fv_core.res.nc
  filename_cplr: Hybrid-4DEnsVar.coupler.res
  filename_trcr: Hybrid-4DEnsVar.fv_tracer.res.nc
  first: PT0H
  frequency: PT06H
variational:
  iteration:
  - ninner: '10'
    gradient_norm_reduction: 1e-10
    test: 'on'
    diagnostics:
      departures: ombg
    resolution:
      nml_file: Data/fv3files/input_gfs_c48.nml
      trc_file: Data/fv3files/field_table
      halo: '3'
      filepath_akbk: Data/INPUTS/GFS_c48/ENSEMBLE/mem001/RESTART/
      filename_akbk: 20180415.000000.fv_core.res.nc
      ak_var: ak
      bk_var: bk
    linearmodel:
      varchange: 'Identity'
      name: 'FV3JEDITLM'
      version: FV3JEDITLM
      nml_file: Data/fv3files/input_gfs_c48.nml
      trc_file: Data/fv3files/field_table
      nml_file_pert: Data/fv3files/inputpert_4dvar.nml
      tstep: PT15M
      lm_do_dyn: 1
      lm_do_trb: 0
      lm_do_mst: 0
      trajectory:
        name: 'FV3'
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        nml_file_pert: Data/fv3files/inputpert_4dvar.nml
        tstep: PT15M
        readtraj: 0
        lm_do_dyn: 1
        lm_do_trb: 0
        lm_do_mst: 0
  - ninner: '5'
    gradient_norm_reduction: 1e-10
    test: 'on'
    diagnostics:
      departures: ombg
    resolution:
      nml_file: Data/fv3files/input_gfs_c48.nml
      trc_file: Data/fv3files/field_table
      halo: '3'
      filepath_akbk: Data/INPUTS/GFS_c48/ENSEMBLE/mem001/RESTART/
      filename_akbk: 20180415.000000.fv_core.res.nc
      ak_var: ak
      bk_var: bk
    linearmodel:
      varchange: 'Identity'
      name: 'FV3JEDITLM'
      version: FV3JEDITLM
      nml_file: Data/fv3files/input_gfs_c48.nml
      trc_file: Data/fv3files/field_table
      nml_file_pert: Data/fv3files/inputpert_4dvar.nml
      tstep: PT15M
      lm_do_dyn: 1
      lm_do_trb: 0
      lm_do_mst: 0
      trajectory:
        name: 'FV3'
        nml_file: Data/fv3files/input_gfs_c48.nml
        trc_file: Data/fv3files/field_table
        nml_file_pert: Data/fv3files/inputpert_4dvar.nml
        tstep: PT15M
        readtraj: 0
        lm_do_dyn: 1
        lm_do_trb: 0
        lm_do_mst: 0
final:
  diagnostics:
    departures: oman
